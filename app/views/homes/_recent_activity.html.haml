#recent-activity.content-block

  %h3
    %span
      = image_tag "icons/information.png", :title => t('home.recent_activity_tooltip'), :class => "icon tooltipped upwards rightwards"
      = t('home.activity')
    #recent-activity-options
      = t('show') + ":"
      = home_menu_checkbox "posts"
      = label_tag t('post.other')
      = home_menu_checkbox "events"
      = label_tag t('event.other')
      = home_menu_checkbox "news"
      = label_tag t('news.other')
      = home_menu_checkbox "attachments"
      = label_tag t('attachment.other')
      - [15, 30, 50].each do |per_page|
        = link_to_unless @contents_per_page.to_i == per_page, per_page, path_for_home(:per_page => per_page)
      = t('per_page')

  -#%div{:class => "arrow_take_box float_right_icon #{'hide' unless @update_act}", :style => "margin-top: 7px;"}
  -#  = image_tag("icons/takeico.png", :class=>"icon",:title=> t('information.reduce'))
  -#%div{:class => "arrow_drop_box float_right_icon #{'hide' if @update_act}"}
  -#  = image_tag("icons/dropico.png", :class=>"icon",:title=> t('information.expand'))

  #recent-activity-content
    - for interval in intervals(@all_contents) do
      - unless interval[:contents].empty?
        .interval-title
          %span.bold= t('updated') + " " + interval[:name]
      - interval[:contents].each do |content|
        - case content
        - when Post
          = render :partial => "posts/unified_post" , :locals => {:thread => content.reload, :extended => false, :last => (interval[:contents].last == content), :show_author => true}
        - when Event
          = render :partial => "events/unified_event", :locals => {:event => content.reload, :last => (interval[:contents].last == content)}
        - when News
          = render :partial => "news/unified_news", :locals =>{:news => content.reload, :last => (interval[:contents].last == content)}
        - when Attachment
          - content = content.reload
          = render :partial => "attachments/unified_attachment", :locals =>{:attachment => content, :last => (interval[:contents].last == content), :show_author => true} if content.post.blank?
    .content-block-footer
      = will_paginate @all_contents
