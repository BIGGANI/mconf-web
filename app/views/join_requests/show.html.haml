- candidate = @join_request.candidate
- introducer = @join_request.introducer
- is_introducer = introducer == current_user
- is_candidate = candidate == current_user
- is_other = !is_introducer && !is_candidate

#join-requests-show

  - if @join_request.request_type == "invite"

    - if is_introducer
      %h3= t('.is_introducer.title_invitation', candidate: candidate.full_name, space: @space.name, date: l(@join_request.created_at.to_date, :format => :long))
    - elsif is_candidate
      %h3= t('.is_candidate.title_invitation', introducer: introducer.full_name, space: @space.name, date: l(@join_request.created_at.to_date, :format => :long))
    - else
      %h3= t('.is_other.title_invitation', introducer: introducer.full_name, candidate: candidate.full_name, space: @space.name, date: l(@join_request.created_at.to_date, :format => :long))

    - unless @join_request.comment.blank?
      .invitation-comment
        - if is_introducer
          = t('.is_introducer.comment_invitation')
        - else
          = t('.is_candidate.comment_invitation', name: introducer.full_name)
        .content= @join_request.comment

  - elsif @join_request.request_type == "request"
    %h3= t('.title_request', :name => @space.name, :date => l(@join_request.created_at.to_date, :format => :long))
    - unless @join_request.comment.blank?
      .invitation-comment
        = t('.comment_request')
        .content= @join_request.comment

  .action-buttons

    - if @join_request.processed?
      = t('.already_accepted')

    - else
      -# - target = candidate ? candidate.name : @join_request.email
      - target = candidate.name

      - if @join_request.is_invitation?

        - if can?(:accept, @join_request)
          = simple_form_for [@space, @join_request], url: accept_space_join_request_path(@space, @join_request), namespace: "accept", method: :post do |f|
            = f.submit t('.accept'), :class => "btn btn-success"

        - if can?(:decline, @join_request)
          = simple_form_for [@space, @join_request], url: decline_space_join_request_path(@space, @join_request), namespace: "decline", method: :post do |f|
            = f.submit t('.decline'), :class => 'btn btn-danger'

      - elsif @join_request.is_request?
        - if can?(:decline, @join_request)
          = link_to t('.remove'), decline_space_join_request_path(@space, @join_request), :data => { :confirm => t('.remove_confirmation', :user => target) }, :method => :post, :title => t('.remove'), :class => 'btn btn-danger'
