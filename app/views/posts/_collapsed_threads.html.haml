#posts
  - today = get_today_posts(threads)
  - today_last = today.last
  - yesterday = get_yesterday_posts(threads)
  - yesterday_last = yesterday.last
  - last_week = get_last_week_posts(threads)
  - last_week_last = last_week.last
  - older = get_older_posts(threads)
  - older_last = older.last

  - if today.empty? && yesterday.empty? && last_week.empty? && older.empty?
    %p
      = t('no_messages_in_wall')

  - unless today.empty?
    #line
      .bold
        = t('today')
  - today.each do |thread|
    = render :partial => "thread" , :locals => {:thread => thread, :extended => false,:last => thread == today_last}

  - unless yesterday.empty?
    #line
      .bold
        = t('yesterday')

  - yesterday.each do |thread|
    = render :partial => "thread" , :locals => {:thread => thread, :extended => false,:last => thread == yesterday_last}

  - unless last_week.empty?
    #line
      .bold
        = t('last_week')

  - last_week.each do |thread|
    = render :partial => "thread" , :locals => {:thread => thread, :extended => false,:last => thread == last_week_last}

  - unless older.empty?
    #line
      .bold
        = t('old_items')

  - older.each do |thread|
    = render :partial => "thread" , :locals => {:thread => thread, :extended => false,:last => thread == older_last}