<% content_for :headers do%>
  <%= javascript_include_tag 'jquery.jeditable', 'jquery.filestyle' %>
<%end%>

<% content_for :javascript do%>

<%if @event.authorize?(:update, :to => current_user)%> 
  $('#streaming_url_value').editable('<%=space_event_path(@space, @event)%>',{
        method : 'PUT',
	tooltip   : '<%= t('dblclic')%>',
        cancel    : '<%= t('cancel')%>',
        submit    : '<%= t('ok')%>',
        indicator : '<img src="ui/icons/accept.png" />',
        type      : 'textarea',
        name : 'event[other_streaming_url]',
	width : 500,
	height: 150,
	event     : "dblclick",
        submitdata : {authenticity_token: "<%=form_authenticity_token()%>"},
   });
	 
   $('#streaming_url_value form input').livequery("blur",function(){
     $('#edit_streaming_icon').show();
   });
   
   edit_streaming = function(){
     $('#streaming_url_value').dblclick();
   };
<%end%>

<%end%>
   
<div id="streaming_url" class="margin-up">
  <span>
    <div id="streaming_title"><h3><%=t('event.streaming.title')%>:</h3></div>
    <%= link_to_function (image_tag("icons/pencil.png", :alt => t('edit'),:title=>t('event.streaming.edit'), :class=>"icon" ), "edit_streaming()", :id => "edit_streaming_icon") if @event.authorize?(:update, :to => current_user) %>
  </span>
  <div id="streaming_content">
    <div id="streaming_url_value"><%=@event.other_streaming_url%></div>
  </div>
</div>
