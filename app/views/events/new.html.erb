<%content_for :headers do%>
  <%= javascript_include_tag 'jquery.fcbkcomplete' %>
  <%= stylesheet_link_tag "fcbkcomplete", :media => "screen, projection" %>
<%end%>


<% content_for :javascript do%>

	$("#wait_create_event_button").hide();
	$("#wait_create_event_button").attr('disabled', true);
	
	$("#create_event_button").click(function(){
		$("#create_event_button").hide();
		$("#wait_create_event_button").show();
	});


	$("#organizers_name").livequery(function () {
    $(this).fcbkcomplete({
      cache: true,
      filter_case: false,
      filter_hide: true,
      firstselected: true,
      filter_selected: true,
      maxshownitems: 4
    });
  });
  
  $("#advanced_config").click(function(){
    $("#extra-info").show();
  });
  
  $("#event_type_meeting").click(function(){
    $("#event_vc_mode").val("<%=Event::VC_MODE.index(:telemeeting)%>");
	$(".blue_selected").removeClass("blue_selected");
	$("#event_type_meeting").addClass("blue_selected");
	$(".check_check").hide();
	$("#check_meeting").show();
  });
    
  $("#event_type_class").click(function(){
    $("#event_vc_mode").val("<%=Event::VC_MODE.index(:teleclass)%>");
	$(".blue_selected").removeClass("blue_selected");
	$("#event_type_class").addClass("blue_selected");
	$(".check_check").hide();
	$("#check_class").show();
  });
  
  $("#event_type_conference").click(function(){
    $("#event_vc_mode").val("<%=Event::VC_MODE.index(:teleconference)%>");
	$(".blue_selected").removeClass("blue_selected");
	$("#event_type_conference").addClass("blue_selected");
	$(".check_check").hide();
	$("#check_conference").show();
  });
  
  $("#event_type_presential").click(function(){
    $("#event_vc_mode").val("<%=Event::VC_MODE.index(:in_person)%>");
	$(".blue_selected").removeClass("blue_selected");
	$("#event_type_presential").addClass("blue_selected");
	$(".check_check").hide();
	$("#check_presential").show();
  });
<%end%>


<% form_for(:event, :url => space_events_path(@space), :html => { :multiple => "multiple" }) do |f| -%>

<div class="grey_border_down bold">
  <%=t('event.new.type')%>
</div>
<div id="event_type_selector">
     <span id="event_type_meeting" class="blue_selected"><%= image_tag("virtual_meeting.png",:class=>"icon")%><%=t('event.create.info.meeting.name')%><span id="check_meeting" class="check_check"><%= image_tag("icons/accept.png",:class=>"icon")%></span></span>
	 <span id="event_type_class"><%= image_tag("virtual_class.png",:class=>"icon")%><%=t('event.create.info.class.name')%><span id="check_class" style="display:none" class="check_check"><%= image_tag("icons/accept.png",:class=>"icon")%></span></span>
	 <span id="event_type_conference"><%= image_tag("virtual_congress.png",:class=>"icon")%><%=t('event.create.info.conference.name')%><span id="check_conference" style="display:none" class="check_check"><%= image_tag("icons/accept.png",:class=>"icon")%></span></span>
	 <span id="event_type_presential"><%= image_tag("virtual_meeting.png",:class=>"icon")%><%=t('event.create.info.presential.name')%><span id="check_presential" style="display:none" class="check_check"><%= image_tag("icons/accept.png",:class=>"icon")%></span></span>
     <%= f.hidden_field :vc_mode, :value => Event::VC_MODE.index(:telemeeting) %>
</div>

<div class="grey_border_down bold">
  <%=t('event.new.basic')%>
</div>
    <div>
      <label for="Name"><%= t('name.one')%>:</label>
      <%= f.text_field :name, :size =>25  %>
    </div>
    <div>
      <label for="Description"><%= t('description') %>:</label>
      <%=f.text_area :description%>
    </div>
  
    <div>
      <div id="help2" title="<%=h(t('event.help.organisers'))%>"></div><label for="Organizer"><%= t('organizer') %>:</label>
      <%=select(:organizers, :name, @space.users.map{|u| u.full_name}, {}, {:multiple=>"multiple"})%>
    </div>
    <div>
      <label for="Location"><%= t('event.location') %>:</label>
      <%= f.text_field :location, :size =>25  %>
    </div>  

<div class="grey_border_down bold">
  <%=t('event.new.date')%>
</div>
<div class="without_javascript">
      <div class="margin-up"><label for="start_time" class="main_text"><%= t('event.time.start') %></label><br/>
        <%= f.datetime_select :start_date, :default => Time.zone.now + 10.minutes%>
      </div>
	  <div class="margin-up"><label for="end_time" class="main_text"><%= t('event.time.end') %></label><br/>
        <%= f.datetime_select :end_date, :default => Time.zone.now + 10.minutes + 2.hours%>
      </div>
</div>

<div class="grey_border_down bold">
  <%=t('event.new.vcoptions')%>
</div>
	<%=check_box_tag "video_streaming", "video_streaming"%> <%=t('event.create.video_streaming')%>
	<%=check_box_tag "video_recording", "video_recording"%> <%=t('event.create.video_recording')%>
	<div id="advanced_config"><%=t('event.create.advanced_conf')%></div>
    <div id="extra-info"  style="display:none">
	       <%= t('event.enable.isabelbw') %> : <%= f.select "isabel_bw", options_for_select_with_class_selected([["2M", "2M"], ["1M", "1M"], ["512K", "512K"]] , ["1M", "1M"])%> <br/>
		   <%= t('event.enable.webbw') %> : <%= f.select "web_bw", options_for_select_with_class_selected([["High (450K Sorenson)", "2"], ["Medium (250K H.264)", "1"], ["Low (150K H.264)", "0"]] , ["Medium (250K H.264)", "1"])%> <br/>
		   <%= t('event.enable.recbw') %> : <%= f.select "recording_bw", options_for_select_with_class_selected([["High (550K H.264)", "2"],["Medium (250K H.264)", "1"]] , ["Medium (250K H.264)", "1"])%> <br/>
		   <div class="checkbox_event">
	       <%=f.check_box :sip_interface,:class=>"icon", :checked => false  %>
	        <label for="enable_isabel" class="label_izquierda" ><%= t('event.enable.sip') %></label>
	      </div>
		  <%= f.hidden_field :web_interface, :value => true %>
		  <%= f.hidden_field :isabel_interface, :value => true %>
    </div>
	

<div class="grey_border_down bold">
  <%=t('event.new.docs')%>
</div>

    <div class="margin-up">
	     <button type="submit" id="create_event_button" class="basic_button blue_button"><%=t("button.create")%></button>
		 <button id="wait_create_event_button" class="basic_button blue_button"><%=t("button.creating")%></button>
	      <%= link_to "<span>" + t('cancel') + "</span>", space_events_path,:class => "basic_button blue_button", :id=>"cancel_event"%>
	 </div>
     
  <% end %>